# 简介

什么是Etcd?

是一个分布式的，一致的 key-value 存储，主要用途是共享配置和服务发现。

- 提供存储以及获取数据的接口，它通过协议保证 Etcd 集群中的多个节点数据的强一致性。用于存储元信息以及共享配置。
- 提供监听机制，客户端可以监听某个key或者某些key的变更（v2和v3的机制不同，参看后面文章）。用于监听和**变更。
- 提供key的过期以及续约机制，客户端通过定时刷新来实现续约（v2和v3的实现机制也不一样）。用于集群监控以及服务注册发现。
- 提供原子的CAS（Compare-and-Swap）和 CAD（Compare-and-Delete）支持（v2通过接口参数实现，v3通过批量事务实现）。用于分布式锁以及leader选举。

Etcd主要使用了raft协议来保持一致性, 这里raft协议不做介绍, 可以看我另一篇文章.

# wal

wal日志是二进制的，解析出来后是一个数据结构`LogEntry`。结构如下

|||||
|type |term |index |data |

